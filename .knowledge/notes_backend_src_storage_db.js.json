{"is_source_file": true, "format": "JavaScript", "description": "This file provides an asynchronous storage API for managing notes, utilizing the file system to read and write a JSON file that stores note data. It includes functions to ensure storage exists, load data into an internal cache, save cache back to disk, and exposes a public interface for listing notes and placeholder functions for creating, updating, retrieving, and deleting notes (currently not implemented).", "external_files": ["fs/promises", "path", "url"], "external_methods": ["fs.mkdir", "fs.access", "fs.writeFile", "fs.readFile", "fileURLToPath"], "published": ["db"], "classes": [], "methods": [{"name": "ensureStorage()", "description": "Ensures that the data directory and the notes JSON file exist; creates them if they do not.", "scope": "", "scopeKind": ""}, {"name": "load()", "description": "Loads data from the JSON file into an internal cache, initializing the cache if necessary.", "scope": "", "scopeKind": ""}, {"name": "save()", "description": "Serializes the cache and writes it back to the data file.", "scope": "", "scopeKind": ""}, {"name": "create()", "scope": "db", "scopeKind": "class", "description": "unavailable"}, {"name": "list()", "scope": "db", "scopeKind": "class", "description": "unavailable"}], "calls": ["fs.mkdir", "fs.access", "fs.writeFile", "fs.readFile"], "search-terms": ["storage", "notes.json", "fs/promises", "cache", "load", "save", "ensureStorage"], "state": 2, "file_id": 27, "knowledge_revision": 62, "git_revision": "6fa2ef6f2ca9c5a733d14175ca4feae6ef5e8031", "ctags": [{"_type": "tag", "name": "DATA_DIR", "path": "/home/kavia/workspace/code-generation/simple-notes-app-187551-187560/notes_backend/src/storage/db.js", "pattern": "/^const DATA_DIR = path.resolve(__dirname, '..\\/..\\/data');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "DATA_FILE", "path": "/home/kavia/workspace/code-generation/simple-notes-app-187551-187560/notes_backend/src/storage/db.js", "pattern": "/^const DATA_FILE = path.join(DATA_DIR, 'notes.json');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "__dirname", "path": "/home/kavia/workspace/code-generation/simple-notes-app-187551-187560/notes_backend/src/storage/db.js", "pattern": "/^const __dirname = path.dirname(__filename);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "__filename", "path": "/home/kavia/workspace/code-generation/simple-notes-app-187551-187560/notes_backend/src/storage/db.js", "pattern": "/^const __filename = fileURLToPath(import.meta.url);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "cache", "path": "/home/kavia/workspace/code-generation/simple-notes-app-187551-187560/notes_backend/src/storage/db.js", "pattern": "/^    cache = { notes: [] };$/", "language": "JavaScript", "kind": "class", "scope": "load", "scopeKind": "class"}, {"_type": "tag", "name": "cache", "path": "/home/kavia/workspace/code-generation/simple-notes-app-187551-187560/notes_backend/src/storage/db.js", "pattern": "/^let cache = null;$/", "language": "JavaScript", "kind": "variable"}, {"_type": "tag", "name": "create", "path": "/home/kavia/workspace/code-generation/simple-notes-app-187551-187560/notes_backend/src/storage/db.js", "pattern": "/^  async create(\\/* note *\\/) {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "db", "scopeKind": "class"}, {"_type": "tag", "name": "db", "path": "/home/kavia/workspace/code-generation/simple-notes-app-187551-187560/notes_backend/src/storage/db.js", "pattern": "/^export const db = {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "ensureStorage", "path": "/home/kavia/workspace/code-generation/simple-notes-app-187551-187560/notes_backend/src/storage/db.js", "pattern": "/^async function ensureStorage() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "list", "path": "/home/kavia/workspace/code-generation/simple-notes-app-187551-187560/notes_backend/src/storage/db.js", "pattern": "/^  async list() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "db", "scopeKind": "class"}, {"_type": "tag", "name": "load", "path": "/home/kavia/workspace/code-generation/simple-notes-app-187551-187560/notes_backend/src/storage/db.js", "pattern": "/^async function load() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "notes", "path": "/home/kavia/workspace/code-generation/simple-notes-app-187551-187560/notes_backend/src/storage/db.js", "pattern": "/^    cache = { notes: [] };$/", "language": "JavaScript", "kind": "property", "scope": "load.cache", "scopeKind": "class"}, {"_type": "tag", "name": "save", "path": "/home/kavia/workspace/code-generation/simple-notes-app-187551-187560/notes_backend/src/storage/db.js", "pattern": "/^async function save() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}], "hash": "e4232c18d38934819e2ee144472340ff", "format-version": 4, "code-base-name": "notes_frontend", "filename": "notes_backend/src/storage/db.js", "fields": [{"name": "let cache = null;", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "cache = { notes: [] };", "scope": "load.cache", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"62": "6fa2ef6f2ca9c5a733d14175ca4feae6ef5e8031"}]}